<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Car">

    <insert id="insertCar" parameterType="com.finals.carrentapi.model.Car">
        INSERT INTO cars (
        brand,
        carName,
        carType,
        amountOfPassenger,
        amountOfLuggage,
        pricePerDay,
        driver,
        startDateAndTime,
        endDateAndTime,
        city,
        vendorName,
        carStatus,
        paymentStatus,
        review,
        rating,
        baseRating,
        refund,
        cleanTrip,
        reschedule,
        imageLink,
        isDeleted
        )
        VALUES (
        #{brand},
        #{carName},
        #{carType},
        #{amountOfPassenger},
        #{amountOfLuggage},
        #{pricePerDay},
        #{driver},
        #{startDateAndTime},
        #{endDateAndTime},
        #{city},
        #{vendorName},
        #{carStatus},
        #{paymentStatus},
        #{review},
        #{rating},
        #{baseRating},
        #{refund},
        #{cleanTrip},
        #{reschedule},
        #{imageLink},
        #{isDeleted}
        );
    </insert>

    <resultMap id="result" type="com.finals.carrentapi.model.Car">
        <result property="idCar" column="idCar"/>
        <result property="brand" column="brand"/>
        <result property="carName" column="carName"/>
        <result property="carType" column="carType"/>
        <result property="amountOfPassenger" column="amountOfPassenger"/>
        <result property="amountOfLuggage" column="amountOfLuggage"/>
        <result property="pricePerDay" column="pricePerDay"/>
        <result property="driver" column="driver"/>
        <result property="startDateAndTime" column="startDateAndTime"/>
        <result property="city" column="city"/>
        <result property="vendorName" column="vendorName"/>
        <result property="carStatus" column="carStatus"/>
        <result property="paymentStatus" column="paymentStatus"/>
        <result property="review" column="review"/>
        <result property="rating" column="rating"/>
        <result property="baseRating" column="baseRating"/>
        <result property="refund" column="refund"/>
        <result property="cleanTrip" column="cleanTrip"/>
        <result property="reschedule" column="reschedule"/>
        <result property="imageLink" column="imageLink"/>
    </resultMap>

    <select id="getAvailableCars" parameterType="java.lang.String" resultMap="result">
        SELECT * from cars where carStatus = #{carStatus};
    </select>

    <select id="getAvailableCarsByCity" parameterType="java.lang.String" resultMap="resultByCity">
        SELECT * from cars where city = #{city};
    </select>

    <resultMap id="resultByCity" type="com.finals.carrentapi.model.Car">
        <result property="idCar" column="idCar"/>
        <result property="brand" column="brand"/>
        <result property="carName" column="carName"/>
        <result property="carType" column="carType"/>
        <result property="amountOfPassenger" column="amountOfPassenger"/>
        <result property="amountOfLuggage" column="amountOfLuggage"/>
        <result property="pricePerDay" column="pricePerDay"/>
        <result property="driver" column="driver"/>
        <result property="startDateAndTime" column="startDateAndTime"/>
        <result property="imageLink" column="imageLink"/>
    </resultMap>

    <select id="getById" parameterType="long" resultMap="result">
        SELECT * FROM CARS WHERE idCar = #{idCar};
    </select>

    <update id="updateCar" parameterType="com.finals.carrentapi.model.Car">
        UPDATE CARS SET BRAND = #{brand},
        carName=#{carName},
        carType=#{carType},
        amountOfPassenger=#{amountOfPassenger},
        amountOfLuggage=#{amountOfLuggage},
        pricePerDay=#{pricePerDay},
        driver=#{driver},
        startDateAndTime=#{startDateAndTime},
        endDateAndTime=#{endDateAndTime},
        city=#{city},
        vendorName=#{vendorName},
        carStatus=#{carStatus},
        paymentStatus=#{paymentStatus},
        review=#{review},
        rating=#{rating},
        baseRating=#{baseRating},
        refund=#{refund},
        cleanTrip=#{cleanTrip},
        reschedule=#{reschedule},
        imageLink=#{imageLink},
        isDeleted=#{isDeleted}
        WHERE idCar = #{idCar};
    </update>

    <delete id = "deleteById" parameterType = "long">
        DELETE from CARS WHERE idCar = #{idCar};
    </delete>

</mapper>
